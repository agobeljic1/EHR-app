<ng-container *ngLet="organizations$ | async as organizations">
  <ng-container *ngLet="loading$ | async as loading">
    <div class="w-full organizations-wrapper">
      <div
        class="d-flex justify-content-between align-items-center w-full headline-wrapper"
      >
        <h2>Organizations</h2>
        <div class="d-flex align-items-center">
          <app-spinner *ngIf="loading" [dark]="true"></app-spinner>
          <button
            (click)="onCreateOrganizationClick()"
            mat-raised-button
            color="primary"
          >
            Create new organization
          </button>
        </div>
      </div>

      <table
        mat-table
        [dataSource]="organizations"
        class="mat-elevation-z8 w-full"
      >
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <ng-container matColumnDef="line">
          <th mat-header-cell *matHeaderCellDef>Line</th>
          <td mat-cell *matCellDef="let element">{{ element.line }}</td>
        </ng-container>

        <ng-container matColumnDef="city">
          <th mat-header-cell *matHeaderCellDef>City</th>
          <td mat-cell *matCellDef="let element">{{ element.city }}</td>
        </ng-container>

        <ng-container matColumnDef="country">
          <th mat-header-cell *matHeaderCellDef>Country</th>
          <td mat-cell *matCellDef="let element">{{ element.country }}</td>
        </ng-container>

        <ng-container matColumnDef="options">
          <th mat-header-cell *matHeaderCellDef>Options</th>
          <td mat-cell *matCellDef="let element">
            <div class="options-buttons-wrapper">
              <button
                (click)="onShowOrganizationDetails($event, element)"
                mat-raised-button
                color="primary"
              >
                <label>Details</label>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="cursor-pointer organization-row"
        ></tr>
      </table>
    </div>
  </ng-container>
</ng-container>
